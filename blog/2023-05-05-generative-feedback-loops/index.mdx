---
authors:
- connor
date: 2023-05-05
description: An introduction to creating generative feedback loops with LLMs in Weaviate.
image: ./img/hero.png
slug: generative-feedback-loops-with-LLMs
tags:
- integrations
- how-to
title: Generative Feedback Loops with LLMs for Vector Databases
---

![生成式反馈循环与LLM可视化](./img/hero.png)

<!-- 省略部分 -->

大型语言模型正在引领信息技术的新时代。为了更好地理解这一革命，重要的是考虑历史背景。印刷机大大降低了信息复制的成本，而互联网消除了中间商，使信息的发布几乎成本为零。在《聚合理论》(Aggregation Theory)中，本·汤普森(Ben Thompson)写道，互联网的免费分发使得公司能够模块化(或解耦)服务，并专注于用户体验。本指出：“赢得用户体验的公司可以形成一个良性循环，他们对消费者/用户的占有吸引供应商，从而改善用户体验”。

进入大型语言模型（LLMs），这是一项可以以令人难以置信的速度和低成本进行信息转换和生成的改变世界的技术。**LLMs提供了加速聚合理论所描述的良性循环的机会，通过让传统上需要大量人力才能提供出色用户体验的人类努力实现商品化。**

互联网改变了报纸的传播方式，现在内容可以直接送到您手中。现在我们正在更进一步，根据您的个人偏好修改内容本身！我们不仅能够向用户提供优秀的用户体验，而且还能够实时生成内容，基于数据库中的现有信息，以创造更好、更个性化的体验！

在本文中，我们将阐述使用LLMs进行生成反馈循环的概念。从Weaviate向量数据库中检索信息以促使Weaviate的生成模块，并将这些生成内容进行向量化和保存**返回**到数据库中！现在我们可以通过生成的内容进行语义搜索，还可以添加有关它的符号元数据。

我们将扮演AirBnB的角色，并实现一个生成式反馈循环来处理`Listing`对象。这展示了LLM如何通过根据用户偏好创建定制广告来提升用户体验。我们从数据库中检索有关用户的信息，将该信息与Listing的信息一起提供给LLM，并将生成的定制广告保存回数据库。

在深入讨论之前，以下是代码片段的快速概述：
1. 基于 x、y、z 创建 Listings 的描述。
2. 通过向量数据库进行语义搜索生成的 Listings。
3. 为这些 Listings 生成广告，并将它们与交叉引用链接起来。
4. 为狗主人 Connor 和举重运动员 Bob 编写个性化广告。

## 第一部分：AirBnB 列表示例

:::note
The Github repo with notebooks (using Weaviate embedded) can be found [here](https://github.com/weaviate/Generative-Feedback-Loops/).
:::

在这个例子中，我们将使用OpenAI的`text-davinci-003`和Cohere的`command-xlarge-nightly` LLMs来生成内容，但也可以使用其他提供商，如HuggingFace、Anthropic等。将您的OpenAI或Cohere密钥设置为与Weaviate的生成模块一起使用，可以使用以下代码块：

```python
import weaviate
client = weaviate.Client(embedded_options=weaviate.EmbeddedOptions(),
			    additional_headers = {
				“X-OpenAI-Api-Key”: “<YOUR OPENAI KEY HERE>”
			  }) # if using Cohere, replace this with "X-Cohere-Api-Key"
client.get_meta() # see which modules are enabled in Weaviate Embedded
```

下表显示了我们将使用的数据架构，请参考笔记本中的完整JSON字典，以创建具有此类配置的Weaviate模式：

| 属性                   | 类型    | 向量化？ | 人工智能生成？ | 在导入数据集中？ |
|----------------------------|---------|------------|---------------| -------------------
| name                       | 文本    | ✅          | ❌            | ✅ |
| 描述                      | 文本    | ✅          | ✅            | ❌ |
| 主机名                   | 文本    | ❌          | ❌            | ✅ |
| 社区                      | 文本    | ❌          | ❌            | ✅ |
| 社区群组                | 文本    | ❌          | ❌            | ✅ |
| 纬度                   | 数字  | ❌          | ❌            | ✅ |
| 经度                  | 数字  | ❌          | ❌            | ✅ |
| room_type                  | text    | ❌          | ❌            | ✅ |
| price                      | number  | ❌          | ❌            | ✅ |
| minimum_nights             | int     | ❌          | ❌            | ✅ |
| number_of_reviews          | int     | ❌          | ❌            | ✅ |
| last_review                | date    | ❌          | ❌            | ✅ |
| reviews_per_month          | number  | ❌          | ❌            | ✅ |
| calculated_host_listings_count | int | ❌ | ❌ | ✅ |
| availability_365 | int | ❌ | ❌ | ✅ |
| hasAd | Ad | ❌ | ✅ | ❌ |



:::note
The schema can be found in this [repository](https://github.com/weaviate/Generative-Feedback-Loops/blob/main/python/listing-schema.py)
:::

## 避免产生幻觉：具备LLM能力的实时数据
通过利用“请仅根据提供的信息回答”的提示工程策略，我们将列表数据库中的数据集成到生成模型中。这样我们就可以从提供的信息中获取相关内容。通过强调使用存储在Weaviate中的实时信息，我们可以持续更新语言模型，以获取最新的数据，从而绕过对其编码知识的限制。最终将数据库中的事实信息与LLM语言理解的精华相结合。

### 为每个列表生成描述

import GenerativeFeedbackLoopsDescription from '/_includes/code/generative.feedback.loops.description.mdx';

<GenerativeFeedbackLoopsDescription/>

现在让我们通过使用相应的LLM生成的`description`对列表进行语义搜索测试：

import GenerativeFeedbackLoopsSearch from '/_includes/code/generative.feedback.loops.search.mdx';

<GenerativeFeedbackLoopsSearch/>

<details>
  <summary>
    OpenAI 生成
  </summary>
  <div>

| 排名 | 结果 |
|------|--------|
| 1    | 这个位于布鲁克林的贝德福德-斯图文森特社区的私人房间是长期居住的理想选择。空间干净安静，提供了一个远离城市喧嚣的宁静休憩之所。最短入住60晚，您将有足够的时间探索布鲁克林的所有魅力。位置便利，交通便利，附近有各种商店和餐馆。虽然目前还没有评论，但您可以放心，房东经验丰富，致力于提供舒适愉快的住宿体验。365天全年可预订，这个房源是在布鲁克林寻找长期住宿的绝佳选择。 |
| 2    | 这间宽敞的两居室公寓位于曼哈顿充满活力的东哈莱姆社区，距离中央公园仅几步之遥。整个房屋可供出租，为客人在逗留期间提供充足的空间和隐私。最少入住7晚，此房源非常适合寻找长期租赁选项的人。尽管目前对于这个房产还没有评价，但客人可以放心，他们将入住一个维护良好、舒适的空间。主人在Airbnb上有两个房源，此房产的可用性为一年中的249天。立即预订，从这间宽敞的公寓舒适地体验纽约市的激动人心。 |
| 3    | 这间私人房间位于布鲁克林的Flatbush社区，为城市中心提供了一个独特的乡村空间。该房间的价格为每晚150美元，最低入住一晚。虽然目前还没有关于这个房源的评价，但它全年365天都可以预订。主人只有一个房源，为客人提供个性化和周到的服务。该物业的纬度和经度坐标分别是40.63702和-73.96327。立即预订，在繁忙的布鲁克林市享受宁静和放松的住宿。 |
  </div>
</details>

<details>
  <summary>
    Cohere Generations
  </summary>
  <div>

| 排名 | 结果 |
|------|--------|
| 1    | 欢迎来到城市中的您的国家空间！这间美丽、明亮、安静的两居室公寓已经完全翻新，设有独立入口、带全新不锈钢家电的大厨房，两间配有大号床的卧室，以及带浸泡浴缸的全套浴室。单位内还配有洗衣机、烘干机和洗碗机。公寓位于非常安静和安全的社区，附近还靠近地铁和许多公交线路。步行也可以快速到达美丽的展望公园。 |
| 2    | 哈莱姆村……纽约！\n\n这是哈莱姆村。一个充满活力、多彩多样、充满异国风情的纽约最著名的村庄。\n\n我是哈莱姆村的自豪居民，我非常兴奋地与您分享我的家。我也是一个热爱旅行的人，喜欢结识来自世界各地的新朋友。\n\n当您入住我的地方时，您将拥有自己的私人房间和浴室。您还可以使用厨房和客厅。\n\n我位于哈莱姆的中心地带，距离2/3号地铁站只有几个街区。从那里，只需几站就可到达曼哈顿市中心。\n\n您将被哈莱姆提供的最佳餐厅、酒吧和夜总会所环绕。著名的阿波罗剧院就在几个街区之遥。美丽的中央公园也只是一个短暂的步行路程。\n\n来到哈莱姆村，体验真正的纽约市。我期待着与您见面，并向您展示我的家。 |
| 3    | 巨大的2卧室公寓，位于上东区中央公园\n\n东哈莱姆\n曼哈顿\n\n价格：$190\n\n这个巨大的2卧室公寓位于曼哈顿的中心地带，距离中央公园仅几步之遥。它经过全新装修，配有不锈钢电器、裸露的砖墙和漂亮的硬木地板。公寓位于一个非常安全和便利的地区，附近有各种餐馆和商店。地铁也非常近，方便在城市中四处游览。\n\n这是任何想要探索纽约市的人的理想之地。 |

  </div>
</details>

注意第三代Cohere模型输出的是`Cental Park`而不是正确拼写的`Central Park`！乍一看，模型似乎是在产生幻觉，拼错了`Cental Park`，但实际上这是数据中的内容。这是一个很好的轶事，表明模型会根据输入进行处理，尽管它有关于曼哈顿的先验知识，但它仍然会将其称为`Cental Park`，因为检索到的内容要求如此。

### 生成新的数据对象

在前面的示例中，我们通过添加 `description` 属性来增强现有的数据对象。但是现在我们甚至可以基于这些新对象创建完全新的数据对象（例如，针对特定目标受众的广告）。

import GenerativeFeedbackLoopsLoop from '/_includes/code/generative.feedback.loops.loop.mdx';

<GenerativeFeedbackLoopsLoop/>

让我们来看看生成的广告以及它们所来源的描述信息：

<details>
  <summary>
    OpenAI 生成体验
  </summary>
  <div>

| 描述 | 广告 |
|------|----|
| 这间位于布鲁克林的贝德福德 - 斯图维森特社区的舒适私人房间是长期居住的绝佳选择。房间位于40.68876纬度和-73.94312经度，干净安静，最短入住时间为60晚。根据主机列表计算，有1个可用房源，全年365天可预订，您可以放心选择这里。目前还没有评论，所以赶快成为第一个体验这个美妙房间的人吧！| 您正在寻找一个长期居住的地方吗？那么不要再犹豫了，这间位于布鲁克林贝德福德 - 斯图维森特社区的舒适私人房间是您的最佳选择！该房间位于40.68876纬度和-73.94312经度，干净安静，最短入住时间为60晚。根据主机列表计算，有1个可用房源，全年365天可预订，您可以放心选择这里。快来成为第一个体验这个美妙房间并撰写评论的人吧！不要错过这个绝佳机会，立即预订！|
欢迎来到曼哈顿上东区的这间美丽的两居室公寓！位于东哈莱姆社区，这间公寓距离中央公园仅几步之遥，并且周围环绕着各种餐厅、商店和其他景点。在这间公寓中，您可以享受到所有必要的设施，最低租期为七晚，每晚价格为190美元。每年有249天可供出租，这是您下次度假或商务旅行的理想住所！立即预订，体验曼哈顿的最佳风光！
| 这间舒适的私人房间位于布鲁克林的Flatbush社区。您可以在城市中享受便利的同时，仍然能够感受到乡村的宁静。该房间可供最少一晚入住，并全年提供预订。通过纬度40.63702和经度-73.96327，您将能够轻松探索城市。此房源尚无评论，因此成为第一个体验这个独特的乡村空间在城市中的人。| 您是否正在寻找城市中的独特度假地？那么就不要再寻找了，这间舒适的私人房间位于布鲁克林的Flatbush社区！您可以在城市中享受便利的同时，仍然能够感受到乡村的宁静。通过纬度40.63702和经度-73.96327，您将能够轻松探索城市。此房源尚无评论，因此成为第一个体验这个独一无二的乡村空间在城市中的人。立即预订，最少一晚入住，全年提供！|

</div>
</details>


<details>
  <summary>
    Cohere Generations
  </summary>
  <div>

| 描述 | 广告 |
| ---- | -- |
| 巨大的2卧室位于上东区中央公园\n\n主人单独\n\n东哈莱姆\n曼哈顿\n\n价格：$190\n\n这个巨大的两卧室公寓位于曼哈顿的中心地带，步行即可到达中央公园。它经过全新翻修，配有不锈钢电器、裸露的砖墙和美丽的硬木地板。公寓位于一个非常安全和便利的地区，附近有各种餐馆和商店。地铁也非常近，方便您在城市中四处游览。\n\n这是一个完美的地方，适合任何想要探索纽约市的人。 | 欢迎来到位于曼哈顿中心的您的第二个家！这个巨大的两卧室公寓位于中央公园仅几步之遥，是纽约市最好的地方。\n\n公寓经过全新翻修，配有不锈钢电器、裸露的砖墙和美丽的硬木地板。您会喜欢位于一个非常安全和便利的地区，附近有各种餐馆和商店的便利。地铁也非常近，方便您在城市中四处游览。\n\n无论您是因公务还是娱乐而来，这都是您在逗留期间称为家的完美之地。不要错过在这个令人惊叹的公寓舒适地探索纽约市的机会。立即预订您的住宿，并开始计划您的冒险之旅！ |
欢迎来到城市中的乡村空间！这间美丽、明亮、安静的两居室公寓已经完全翻新，设有独立入口，配备全新的不锈钢厨房电器，两间卧室都配有大号床，浴室设有浸泡式浴缸。单位内还配备了洗衣机、烘干机和洗碗机。该公寓位于非常安静和安全的社区，靠近地铁和许多公交线路。它还是美丽的前景公园的步行距离。

请注意，有150美元的清洁费和500美元的押金。如果公寓没有损坏，押金将在您入住后退还。

我们期待您的光临！
| 哈莱姆村...纽约！\n\n这是哈莱姆村。一个充满活力、多彩、多元化的、纽约最著名的村庄。\n\n我是一个自豪的哈莱姆居民，非常兴奋地与您分享我的家。我也是一个热衷于旅行的人，喜欢结识来自世界各地的新朋友。\n\n当您入住我的地方时，您将拥有自己的私人房间和浴室。您还可以使用厨房和客厅。\n\n我位于哈莱姆的中心地带，距离2/3号地铁站仅几个街区。从那里，只需几站即可到达曼哈顿市中心。\n\n您将被哈莱姆提供的最佳餐厅、酒吧和夜总会所包围。著名的阿波罗剧院就在几个街区之外。美丽的中央公园也只是一个短暂的步行路程。\n\n来哈莱姆村，体验真正的纽约城。期待与您见面，并向您展示我的家。 | 欢迎来到哈莱姆村...纽约！\n\n这是哈莱姆村。一个充满活力、多彩、多元化的、纽约最著名的村庄。\n\n我是一个自豪的哈莱姆居民，非常兴奋地与您分享我的家。我也是一个热衷于旅行的人，喜欢结识来自世界各地的新朋友。\n\n当您入住我的地方时，您将拥有自己的私人房间和浴室。您还可以使用厨房和客厅。\n\n我位于哈莱姆的中心地带，距离2/3号地铁站仅几个街区。从那里，只需几站即可到达曼哈顿市中心。\n\n您将被哈莱姆提供的最佳餐厅、酒吧和夜总会所包围。著名的阿波罗剧院就在几个街区之外。美丽的中央公园也只是一个短暂的步行路程。\n\n来哈莱姆村，体验真正的纽约城。期待与您见面，并向您展示我的家。 |


</div>
</details>

在未来，我们可能希望为`Ad`对象添加其他属性，例如我们运行`Ad`的日期，花费了多少钱，以及所得到的点击率是多少。然后，我们可以通过参考前5个最高点击率的广告来生成一个新的`Ad`！

### 定向广告

现在我们将为我们的提示添加更多的数据，一个高级广告目标。我们将编写针对以下三类人群的广告：(1) 年轻夫妇，(2) 老年夫妇，和 (3) 单身旅行者。我们将像这样将 `target` 添加为 `Ad` 类的属性：

```python
target_property = {
   "dataType": [
       "text"
   ],
   "name": "target",
   "description": "High-level audience target for this ad."
}


client.schema.property.create("Ad", target_property)
```

<details>
  <summary>
    OpenAI 时代
  </summary>
  <div>


| 广告目标 | 广告 |
|---------|----|
| 对于年轻夫妇 | 您是否正在寻找一个舒适的住所，以便长时间居住？不用再找了，这个位于布鲁克林的贝德福德-斯图维森特社区的私人房间就是您的理想选择！该房间位于40.68876纬度和-73.94312经度，干净、安静，非常适合年轻夫妇居住。最短入住时间为60晚，全年365天都有房间可供选择，您一定能找到一个合适的地方。此外，您还可以成为第一个体验这个优秀房间的人 - 目前还没有评论！不要错过这个绝佳机会 - 立即预订您的入住吧！ |
| 适合老年夫妇 | 您是一对老年夫妇，正在寻找一个长期居住的地方吗？那么不要再找了，这个位于布鲁克林的贝德福德-斯图文森特社区的舒适私人房间是您的最佳选择！该房间位于40.68876纬度和-73.94312经度，整洁安静，最短入住期为60个晚上。根据主机列表计数为1和全年365天的可用性，您可以确保在这里找到一个位置。目前还没有评论，所以快来体验一下这个美好的房间吧！享受这个房间的宁静，让它成为您离家的家。 |
| 单人旅行者 | 您是一个单人旅行者，正在寻找一个可以长时间居住的地方吗？那么您可以考虑这个位于布鲁克林的 Bedford-Stuyvesant 社区的舒适私人房间！该房间位于纬度 40.68876，经度 -73.94312 的位置，干净、安静，最短入住时间为 60 天。主持人的房源计数为 1，全年提供 365 天的可用性，您可以放心预订。成为第一个体验这个优秀房间并将其作为您的家外之家吧！ |
| 通用广告 | 您是否正在寻找一个长期居住的地方？不要再找了，这个舒适的私人房间位于布鲁克林的贝德福德-斯图亚文森特社区！该房间位于纬度40.68876和经度-73.94312的位置，干净安静，最少入住60个晚上。根据计算得出的主机房源数量为1，全年365天可用，您可以肯定能找到一个位置。成为第一个体验这间优秀房间并撰写评论的人！不要错过这个绝佳的机会-立即预订！ |

在将来，我们可能想要添加其他属性，比如我们运行广告的日期，花费了多少钱，以及由此产生的点击率是多少。然后，我们可以通过以前5个最高的点击率广告作为参考，生成一个新的广告！

</div>
</details>

<details>
  <summary>
    Cohere Generations
  </summary>
  <div>

| 目标 | 广告 |
| --- | --- |
| 对于年轻夫妇 | 欢迎来到纽约哈莱姆村！这个充满活力、色彩斑斓、多元化且著名的村庄是一个自豪的哈莱姆居民，他迫不及待地想与您分享他们的家园。作为一个热爱旅行的人，他们喜欢结识来自世界各地的新朋友，并向他们展示哈莱姆所能提供的最好的东西。当您入住这家Airbnb时，您将拥有自己的私人房间和浴室，以及厨房和客厅的使用权。主人家位于哈莱姆的中心地带，距离2/3号地铁站仅几个街区，方便前往曼哈顿市中心和城市的其他地区。您将被哈莱姆所提供的最佳餐厅、酒吧和夜总会所包围，包括著名的阿波罗剧院和美丽的中央公园。主人期待着与您见面并带您参观他们的家，所以赶快预订您的住宿，体验哈莱姆村中真正的纽约城！ |
| 适合老年夫妇 | 描述：哈莱姆村……纽约！ 这是哈莱姆村。一个充满活力、丰富多彩、折衷主义的纽约最著名的村庄。我是一个自豪的哈莱姆居民，非常高兴与您分享我的家。我也是一个热衷于旅行的人，喜欢结识来自世界各地的新朋友。当您入住我的地方时，您将拥有自己的私人房间和浴室。您还可以使用厨房和客厅。我位于哈莱姆的中心地带，距离2/3号地铁站仅几个街区。从那里，只需几站就能到达曼哈顿市中心。您将被哈莱姆提供的最佳餐厅、酒吧和夜总会所环绕。著名的阿波罗剧院就在几个街区之外。美丽的中央公园也只是一个短短的步行路程。来到哈莱姆村，体验真正的纽约市吧。我期待着与您见面，并带您参观我的家。 |
| 单人旅行者专属 | 欢迎来到纽约哈莱姆村！这个充满活力、多彩、兼收并蓄的著名村庄是一个自豪的哈莱姆居民的家园，他迫不及待地想与您分享他的家。作为一个热衷于旅行的人，他喜欢结识来自世界各地的新朋友。当您入住这个Airbnb时，您将拥有自己的私人卧室和浴室，以及使用厨房和客厅的权限。主人的住所位于哈莱姆的中心地带，距离2/3号地铁站仅几个街区，便于前往曼哈顿市中心。您将被哈莱姆拥有的最好的餐厅、酒吧和夜总会所包围，包括著名的阿波罗剧院和美丽的中央公园。主人期待着与您见面并向您展示他们的家，所以立即预订您的住宿吧！ |
| 通用广告 | 欢迎来到哈莱姆村...纽约！这是哈莱姆村。一个充满活力、色彩斑斓、多元化和最著名的村庄在纽约。我是一个自豪的哈莱姆居民，很高兴与您分享我的家。我也是一个热衷旅行的人，喜欢结识来自世界各地的新朋友。当您入住我的地方时，您将拥有自己的私人房间和浴室。您还可以使用厨房和客厅。我位于哈莱姆的中心地带，距离2/3号地铁站只有几个街区。从那里，到曼哈顿市中心只需要几站地铁。您将被哈莱姆提供的最好的餐厅、酒吧和夜总会所环绕。著名的阿波罗剧院就在几个街区之外。美丽的


  </div>
</details>


### 针对康纳和鲍勃的个性化广告
让我们继续剥开这个层层叠加的洋葱，展示如何根据用户传记进一步定向这些广告。

```python
users = client.query\
              .get("User", ["biography"])\
              .with_additional(["id"])\
              .with_limit(5)\
              .do()["data"]["Get"]["User"]

for user in users:
  generatePrompt = """
  Please write an engaging advertisement for the following AirBnb Listing:
  Description: {description}
  Please write the advertisement for this listing to target the following user:
  """ + user["biography"]

  ads = client.query\
              .get("Listing", ["description"])\
              .with_generate(single_prompt=generatePrompt)\
              .with_additional(["id"])\
              .with_limit(5)\
              .do()["data"]["Get"]["Listing"]

  for ad in ads:
    new_ad_properties = {
        "content": ad["_additional"]["generate"]["singleResult"],
    }
    new_ad_id = get_valid_uuid(uuid4())
    client.data_object.create(
        data_object = new_ad_properties,
        class_name = "Ad",
        uuid = new_ad_id
    )
    client.data_object.reference.add(
        from_uuid = new_ad_id,
        from_property_name = "hasUserTarget",
        to_uuid = user["_additional"]["id"]
    )
```


<details>
  <summary>
    OpenAI 世代
  </summary>
  <div>

| 名称 | 描述 | 目标广告 #1 | 目标广告 #2 |
| --- | --- | --- | --- |
| Connor | 经常和一只名叫Bowen的金毛小熊狗一起旅行。 | **所有宠物爱好者注意！** 您是否正在寻找纽约市中心一个宽敞舒适、欢迎您的毛茸茸朋友的公寓？不用再找了，这个位于繁华的东哈莱姆区的精美两居室公寓就是您的理想选择...立即预订，与您的金毛小熊狗Bowen一起规划下一次冒险吧！ | **所有携带毛茸茸朋友旅行者注意！** 您是否正在寻找曼哈顿中心一个宁静而经济实惠的住宿？不用再找了，这个位于因伍德社区的私人房间提供了一览无余的克洛伊斯特教堂的壮丽景色...最棒的是什么？您可以带上您的金毛小熊狗Bowen一起冒险！在旅行中不需要把您的毛茸茸朋友留在身后...请注意，此房源的可用性在未来365天内为零，所以立即预订以确保您的下一次与毛茸茸朋友的冒险的位置。 |
| Bob | 热衷于举重的热血汉子，如果没有一个好的健身房进行锻炼，他会感到不安。 | **各位举重爱好者注意！** 您计划去纽约市旅行，担心找不到适合您健身需求的住处吗？那就不要再寻找了，这个宽敞的两居室公寓位于曼哈顿充满活力的东哈莱姆社区...那么还等什么呢？立即预订，从这个宽敞的公寓舒适地体验纽约市的魅力吧。 | **各位举重爱好者注意！** 您是否在寻找一个安静而经济实惠的住处，不会影响您的锻炼计划？那就不要再寻找了，在曼哈顿的伍德社区有一间私人房间等着您...不幸的是，该房源在接下来的365天内没有可用日期，但请记住它，为您下次来城市时做准备。在旅行中不要让您的锻炼计划受到影响-立即预订这个房源！ |

</div>
</details>


<details>
  <summary>
    Cohere Generations
  </summary>
  <div>

| 名称 | 描述 | 目标广告 1 | 目标广告 2 |
| --- | --- | --- | --- |
| Connor | 康纳经常和一只名叫鲍文的金毛小狗一起旅行。 | 欢迎来到城市中的您的国家空间！这间美丽、明亮、安静的两卧室公寓已经完全翻新，并配有私人入口、带全新不锈钢电器的大型厨房、两个配有大号床的卧室以及带浸泡浴缸的全套浴室。单位内还设有洗衣机和烘干机，以及洗碗机。公寓位于一个非常安静和安全的街区，也靠近地铁和许多公交线路。距离美丽的展望公园也只有很短的步行路程。
空间：这间美丽、明亮、安静的两卧室公寓已经完全翻新，并配有私人入口、带全新不锈钢电器的大型厨房、两个配有大号床的卧室以及带浸泡浴缸的全套浴室。单位内还设有洗衣机和烘干机，以及洗碗机。公寓位于一个非常安静和安全的街区，也靠近地铁和许多公交线路。距离美丽的展望公园也只有很短的步行路程。
附近：公寓位于一个非常安静和安全的街区，也靠近地铁和许多公交线路。距离美丽的展望公园也只有很短的步行路程。
床铺：公寓有两间配有大号床的卧室。
浴室：全套浴室设有浸泡浴缸。
厨房：大型厨房配有全新的不锈钢电器。
客厅：客厅明亮宽敞。
餐厅：餐厅非常适合与朋友和家人共进餐。
户外空间：公寓有私人入口。 | 欢迎来到中央公园附近的巨大两卧室公寓。这间巨大的两卧室公寓位于曼哈顿市中心，距离中央公园仅几步之遥。它是全新装修的，配有不锈钢电器、露天砖墙和漂亮的硬木地板。公寓位于一个非常安全和便利的区域，附近有各种餐馆和商店。地铁也非常近，方便在城市中四处游览。这是任何想要探索纽约市的人的理想之地。 |
| Bob | Bob是一个非常勤奋的举重运动员，如果他没有一个好的健身房来锻炼，他会感到不安。 | 你好，举重爱好者！你正在寻找一个能让你追求健身目标的住所吗？那么你找对地方了！这个宽敞的两居室位于曼哈顿中心，毗邻中央公园。它经过全新装修，配有不锈钢电器、裸露的砖墙和漂亮的硬木地板。公寓位于一个非常安全和便利的区域，附近有各种餐馆和商店。地铁也非常近，方便你在城市中四处游玩。那么你还在等什么呢？立即预订你的住宿，体验纽约的最佳！ | 欢迎来到城中的乡村空间！这间美丽、明亮、安静的两居室公寓已经完全翻新，设有独立入口、配备全新不锈钢电器的大型厨房、两间配有大号床的卧室，以及带浸泡浴缸的全套浴室。单位内还配备有洗衣机、烘干机和洗碗机。公寓位于一个非常安静和安全的社区，附近还靠近地铁和多条公交线路。步行也可以到达美丽的前景公园。健身房就在大楼内，非常方便进出。 |

</div>
</details>

## 进一步了解个性化定制
个性化数字体验随着人工智能技术的最新进展已经达到了一个新的水平。除了个性化推荐或搜索结果，内容本身现在可以根据您的特定需求和偏好进行个性化定制。从寻找最近的狗公园或健身房的广告开始，我们可以想象未来甚至会生成视频广告！对于康纳来说，视频可能甚至展示他和他的狗在中央公园散步，而对于鲍勃来说，视频可能展示他在当地健身房做挂推！我们甚至可以想象为人们解释复杂概念时使用自定义的隐喻。例如，对于养狗人康纳来说，“生活就像一场追逐游戏”，对于举重运动员鲍勃来说，“生活就像在健身房中推举和休息”。

## 反馈循环的其他用例示例

1. 电视节目：流媒体服务可以根据用户的偏好展示电影或电视节目的不同场景或替代结局。
2. 代码：AI可以根据用户的需求生成代码片段，并与测试创建一个反馈循环，以逐步改进代码。
3. AutoCAD图纸: AI可以基于3D模型创建建筑的CAD图纸，并存储环境中可用材料的信息，使建筑师和工程师更容易设计和规划建筑项目。
4. 特斯拉配置: 根据用户的驾驶风格和偏好，可以个性化设置汽车的设置，例如选择缓慢和轻松的回家驾驶方式，还是快速和运动的驾驶方式。

## 生成式反馈循环何时运行？
在说明了生成式反馈循环的一般概念后，即我们使用来自数据库的数据来补充生成模型的事实知识，然后将生成的输出写回数据库以供将来使用，让我们讨论何时开始执行此操作。

## 数据摄入
数据导入是指将数据导入数据库的简称。例如，每当向AirBnB数据库添加新用户时，我们可能希望启动一个生成式反馈循环，以检索有关房源和此新用户的信息，并保存针对该用户的新广告。另一方面，当添加新列表时，我们可能希望为每个用户编写广告！

作为另一个例子，假设我们有一个播客集合。每次将新的剧集添加到数据库中时，我们希望启动生成概要和与数据库中现有播客的比较。为了进一步强调生成反馈循环的概念，我们可以检索之前生成的保存并使用语义向量搜索进行索引的播客概要，并使用它来提示生成模型分析最新播客剧集的独特性！

除了基于我们的数据生成新颖的内容之外，我们还可以让LLMs完成添加符号属性的任务。Gilardi、Alizadeh和Kubli最近发表了一篇题为《ChatGPT在文本注释任务中胜过众包工作者》的论文。在这篇论文中，Gilardi等人将人类与ChatGPT在将2,382条推文分类为代表5个分类任务的类别方面的能力进行了比较，例如推文是否涉及内容审查，推文所涉及的六个预定义主题等。这项研究说明了这种技术在为我们的数据添加标签方面的廉价和高效性。当我们生成像“room_type”这样的符号结构时，我们可以在过滤向量搜索中使用它！通过使用Roaring Bitmap索引，Weaviate最近使过滤向量搜索的速度提高了1000倍！

另一个强大的想法是`知识图谱2.0`的出现。我们可以使用LLMs来提供内容之间的关系建议，然后使用关系边将这些节点连接在一起。请查看GraphGPT的示例！

## 从ChatGPT到AutoGPT以及Weaviate的作用
这个部分的另一个标题可以是“过夜运行的复杂任务”。AI最新的创造性成就之一就是AutoGPT的崛起！AutoGPT是一个循环的提示，LLM将复杂任务分解为子任务，执行它们，反思计划，然后重复这个过程，直到完成复杂任务。

生成式反馈循环是解决这个问题的关键之一。首先，代理程序可能需要保存中间结果以供稍后参考。例如，如果代理程序的任务是：“请为John制作一个关于如何将ref2vec添加到他的Weaviate应用程序的示例”。代理程序可以在研究John的代码库和Weaviate的Slack消息历史后保存John的应用程序摘要。然后，在确定在哪里添加ref2vec时，可以在检索增强提示中使用此摘要。

另一个生成反馈循环的应用是用于人类调试像这样的模型在一夜之间运行时发生的推理链。此外，我们可以想象具有不同角色的多智能体系统，如营销人员、艺术家、产品设计师和工程师。通过保存中间结果，其他智能体可以访问它并继续进行下去。

## 结论

总结一下，我们介绍了生成式反馈循环的概念。这不仅描述了使用数据库的结果来回答查询，还将生成的结果保存回数据库以供将来参考。希望这个关于AirBnB列表和广告的例子能够激发您对如何使用这项技术以及个性化的发展方向的思考。我们在文章最后提出了一些运行此类技术的场景，如数据摄入和更多自主的AI助手的趋势。非常感谢您的阅读！


import WhatNext from '/_includes/what-next.mdx'

<WhatNext />
