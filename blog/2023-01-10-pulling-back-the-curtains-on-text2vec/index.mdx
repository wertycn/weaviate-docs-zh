---
authors:
- jp
date: 2023-01-10
description: Ever wonder how Weaviate turns objects into vectors, behind-the-scenes?
  Find out in this post!
image: ./img/hero.png
slug: pulling-back-the-curtains-on-text2vec
tags:
- integrations
- concepts
title: Pulling back the curtains on text2vec
---

<!-- æˆªæ–­ -->

![æ­å¼€text2vecçš„é¢çº±](./img/hero.png)

æ‚¨å¯èƒ½çŸ¥é“Weaviateå°†æ–‡æœ¬è¯­æ–™åº“è½¬æ¢ä¸ºä¸€ç»„å‘é‡ - æ¯ä¸ªå¯¹è±¡éƒ½è¢«èµ‹äºˆä¸€ä¸ªæ•æ‰å…¶â€œå«ä¹‰â€çš„å‘é‡ã€‚ä½†æ‚¨å¯èƒ½ä¸çŸ¥é“å®ƒæ˜¯å¦‚ä½•å®ç°è¿™ä¸€ç‚¹çš„ï¼Œæˆ–è€…å¦‚ä½•è°ƒæ•´è¿™ç§è¡Œä¸ºã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æ­å¼€é¢çº±ï¼Œæ¢è®¨è¿™äº›é—®é¢˜çš„ç­”æ¡ˆï¼Œæ­ç¤ºä¸€äº›`text2vec`é­”æ³•èƒŒåçš„æœºåˆ¶ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å°†ä»…ä½¿ç”¨å¤–éƒ¨APIé‡æ–°ç”ŸæˆWeaviateçš„è¾“å‡ºå‘é‡ã€‚ç„¶åæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•è°ƒæ•´æ–‡æœ¬å‘é‡åŒ–è¿‡ç¨‹ï¼Œæœ€åè®¨è®ºä¸€äº›ç›¸å…³è€ƒè™‘äº‹é¡¹ã€‚

## èƒŒæ™¯

æˆ‘ç»å¸¸è¯´Weaviateèƒ½å¤Ÿå¿«é€Ÿè€Œç®€å•åœ°ä»æ–‡æœ¬ä¸­ç”Ÿæˆå‘é‡æ•°æ®åº“ã€‚ä½†æœ‰æ—¶å¾ˆå®¹æ˜“å¿˜è®°å®ƒç©¶ç«Ÿæœ‰å¤šå¿«ã€å¤šå®¹æ˜“ã€‚

åœ¨è¿‡å»çš„äº”åˆ°åå¹´é‡Œï¼Œå³ä½¿åœ¨â€œæ—§æ—¶ä»£â€ï¼ŒæŠ€æœ¯ä¸Šä¹Ÿæ˜¯å¯ä»¥åˆ¶ä½œå…·å¤‡å‘é‡åŠŸèƒ½çš„æ•°æ®åº“çš„ã€‚ä½ åªéœ€è¦ï¼ˆæ·±å‘¼å¸ï¼‰å¼€å‘ä¸€ä¸ªå‘é‡åŒ–ç®—æ³•ï¼Œå°†æ•°æ®å‘é‡åŒ–ï¼Œæ„å»ºä¸€ä¸ªå‘é‡ç´¢å¼•ï¼Œæ„å»ºä¸€ä¸ªåŒ…å«åº•å±‚æ•°æ®çš„æ•°æ®åº“ï¼Œå°†å‘é‡ç´¢å¼•ä¸æ•°æ®åº“é›†æˆï¼Œç„¶åå°†å‘é‡ç´¢å¼•æŸ¥è¯¢çš„ç»“æœå‘é€åˆ°æ•°æ®åº“ï¼Œå¹¶å°†ä¸¤è€…çš„è¾“å‡ºåˆå¹¶ï¼ˆå‘¼æ°”ï¼‰ã€‚

è¿‡å»çš„å‘é‡æœç´¢ç»å¯¹ä¸æ˜¯ä¸€ä¸ª"ç®€å•çš„æ—¶ä»£"ï¼Œé‰´äºè¿™æ ·çš„èƒŒæ™¯ï¼Œç°ä»£å‘é‡æ•°æ®åº“ï¼ˆå¦‚Weaviateï¼‰çš„å¸å¼•åŠ›éå¸¸æ˜æ˜¾ã€‚

ä½†æ˜¯ï¼Œå°½ç®¡æœªæ¥å·²ç»æ¥ä¸´ï¼Œä½†å®ƒè¿˜ä¸å®Œç¾ã€‚åƒWeaviateè¿™æ ·çš„å·¥å…·å¯èƒ½çœ‹èµ·æ¥å°±åƒé­”æœ¯å¸ˆçš„ç¥ç§˜ç›’å­ã€‚ä½œä¸ºå›åº”ï¼Œæˆ‘ä»¬çš„ç”¨æˆ·ä¼š*ç¡®åˆ‡åœ°*è¯¢é—®Weaviateæ˜¯å¦‚ä½•æ–½å±•é­”æ³•çš„ï¼›å®ƒæ˜¯å¦‚ä½•å°†æ‰€æœ‰çš„æ•°æ®è½¬åŒ–ä¸ºå‘é‡çš„ï¼Œä»¥åŠå¦‚ä½•æ§åˆ¶è¿™ä¸ªè¿‡ç¨‹ã€‚

å› æ­¤ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥æ¢ç´¢è¿™ä¸ªé­”æ³•ç›’å­çš„å†…éƒ¨ã€‚

å¦‚æœæ‚¨æƒ³è·Ÿç€æ“ä½œï¼Œå¯ä»¥åœ¨[è¿™é‡Œ](https://github.com/weaviate/weaviate-examples/tree/main/text2vec-behind-curtain)è·å–Jupyterç¬”è®°æœ¬å’Œæ•°æ®ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æˆ‘ä»¬å…è´¹çš„[Weaviateäº‘æœåŠ¡](https://console.weaviate.cloud)ï¼ˆWCSï¼‰æ²™ç›’ï¼Œæˆ–è€…è‡ªå·±è®¾ç½®Weaviateå®ä¾‹ã€‚

> æ³¨æ„ï¼šå‘é‡åŒ–æ˜¯ç”±[Weaviateâ€œcoreâ€](https://github.com/weaviate/weaviate)å®Œæˆçš„ï¼Œè€Œä¸æ˜¯åœ¨å®¢æˆ·ç«¯å±‚é¢è¿›è¡Œçš„ã€‚å› æ­¤ï¼Œå³ä½¿æˆ‘ä»¬ä½¿ç”¨Pythonç¤ºä¾‹ï¼ŒåŸç†æ˜¯æ™®éé€‚ç”¨çš„ã€‚
è®©æˆ‘ä»¬å¼€å§‹å§ï¼

## Text2vecï¼šå¹•åèŠ±çµ®

Weaviateçš„`text2vec-*`æ¨¡å—å°†æ–‡æœ¬æ•°æ®è½¬æ¢ä¸ºç¨ å¯†å‘é‡ï¼Œä»¥ä¾¿å¡«å……Weaviateæ•°æ®åº“ã€‚æ¯ä¸ª`text2vec-*`æ¨¡å—ä½¿ç”¨å¤–éƒ¨APIï¼ˆå¦‚`text2vec-openai`æˆ–`text2vec-huggingface`ï¼‰æˆ–æœ¬åœ°å®ä¾‹ï¼ˆå¦‚`text2vec-transformers`ï¼‰ä¸ºæ¯ä¸ªå¯¹è±¡ç”Ÿæˆä¸€ä¸ªå‘é‡ã€‚

è®©æˆ‘ä»¬å°è¯•ä½¿ç”¨`text2vec-cohere`æ¨¡å—å¯¹æ•°æ®è¿›è¡Œå‘é‡åŒ–ã€‚æˆ‘ä»¬å°†ä½¿ç”¨æ¥è‡ª`tiny_jeopardy.csv`çš„æ•°æ®[åœ¨è¿™é‡Œå¯ç”¨](https://github.com/weaviate/weaviate-examples/tree/main/text2vec-behind-curtain)ï¼Œå…¶ä¸­åŒ…å«äº†æ¥è‡ªæ¸¸æˆèŠ‚ç›®Jeopardyçš„é—®é¢˜ã€‚è¿™é‡Œæˆ‘ä»¬åªä½¿ç”¨äº†ä¸€äº›ï¼ˆ20ä¸ªï¼‰é—®é¢˜ï¼Œä½†æ˜¯[Kaggleä¸Šçš„å®Œæ•´æ•°æ®é›†](https://www.kaggle.com/datasets/tunguz/200000-jeopardy-questions)åŒ…å«äº†20ä¸‡å¤šä¸ªé—®é¢˜ã€‚

å°†æ•°æ®åŠ è½½åˆ°Pandas dataframeä¸­ï¼Œç„¶ååƒè¿™æ ·å¡«å……Weaviateï¼š

```python
for i, row in df.iterrows():
    properties = {
        "question": row.Question,
        "answer": row.Answer
    }
    client.batch.add_data_object(properties, "Question")
client.batch.flush()
```

è¿™åº”è¯¥æ·»åŠ ä¸€ç³»åˆ—çš„`Question`å¯¹è±¡ï¼Œå…·æœ‰å¦‚ä¸‹çš„æ–‡æœ¬å±æ€§ï¼š

```text
{'question': 'In 1963, live on "The Art Linkletter Show", this company served its billionth burger',
 'answer': "McDonald's"}
```

ç”±äºæˆ‘ä»¬ä½¿ç”¨`text2vec-cohere`æ¨¡å—å¯¹æˆ‘ä»¬çš„æ•°æ®è¿›è¡Œå‘é‡åŒ–ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢Weaviateï¼Œæ‰¾åˆ°ä¸ä»»ä½•è¾“å…¥æ–‡æœ¬æœ€ç›¸ä¼¼çš„æ•°æ®å¯¹è±¡ã€‚åƒè¿™æ ·æŸ¥æ‰¾ä¸`å¿«é¤è¿é”åº—`æœ€æ¥è¿‘çš„æ¡ç›®ï¼š

```python
near_text = {"concepts": ["fast food chains"]}
wv_resp = client.query.get(
    "Question",
    ["question", "answer"]
).with_limit(2).with_near_text(
    near_text
).with_additional(['distance', 'vector']).do()
```

è¿™å°†äº§ç”Ÿä¸Šé¢çš„éº¦å½“åŠ³`Question`å¯¹è±¡ï¼ŒåŒ…æ‹¬å¯¹è±¡å‘é‡å’Œè·ç¦»ã€‚ç»“æœæ˜¯ä¸€ä¸ª`768`ç»´çš„å‘é‡ï¼Œä¸æŸ¥è¯¢å‘é‡ç›¸è·çº¦`0.1`ã€‚

è¿™ä¸€åˆ‡éƒ½å¾ˆç›´è§‚ - ä¸æœ€å¤§çš„å¿«é¤è¿é”åº—ï¼ˆéº¦å½“åŠ³ï¼‰ç›¸å…³çš„æ¡ç›®ä»æˆ‘ä»¬çš„â€œå¿«é¤è¿é”åº—â€æŸ¥è¯¢ä¸­è¿”å›ã€‚

ä½†æ˜¯ï¼Œç­‰ç­‰ï¼Œè¿™ä¸ªå‘é‡æ˜¯å¦‚ä½•å¾—åˆ°çš„å‘¢ï¼Ÿ

è¿™æ˜¯â€œç¥å¥‡â€çš„éƒ¨åˆ†ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¹•åï¼Œçœ‹çœ‹æˆ‘ä»¬æ˜¯å¦èƒ½å¤Ÿå¤åˆ¶è¿™ä¸ªâ€œé­”æœ¯â€ã€‚å…·ä½“æ¥è¯´ï¼Œè®©æˆ‘ä»¬å°è¯•ä½¿ç”¨å¤–éƒ¨APIæ¥å¤åˆ¶Weaviateä¸ºæ¯ä¸ªå¯¹è±¡ç”Ÿæˆçš„è¾“å‡ºå‘é‡ã€‚

![æ‹‰å¼€çª—å¸˜](./img/pulling-back-the-curtains-text2vec.png)

### åŒ¹é…Weaviateçš„å‘é‡åŒ–

æˆ‘ä»¬çŸ¥é“æ¯ä¸ªå¯¹è±¡çš„å‘é‡å¯¹åº”äºå…¶æ–‡æœ¬ã€‚æˆ‘ä»¬ä¸çŸ¥é“çš„æ˜¯å…·ä½“çš„å…³è”æ–¹å¼ã€‚

ç”±äºæ¯ä¸ªå¯¹è±¡åªåŒ…å«ä¸¤ä¸ªå±æ€§ï¼Œ`question`å’Œ`answer`ï¼Œè®©æˆ‘ä»¬å°è¯•å°†æ–‡æœ¬è¿æ¥èµ·æ¥ï¼Œå¹¶å°†å…¶ä¸Weaviateè¿›è¡Œæ¯”è¾ƒã€‚è€Œä¸”ï¼Œæˆ‘ä»¬å°†ç›´æ¥ä½¿ç”¨Cohere APIï¼Œè€Œä¸æ˜¯`text2vec-cohere`æ¨¡å—ã€‚

è¿æ¥å¯¹è±¡ä¸­çš„æ–‡æœ¬ï¼š

```python
str_in = ' '.join([i for i in properties.values()])
```

æˆ‘ä»¬çœ‹åˆ°ï¼š

```text
'In 1963, live on "The Art Linkletter Show", this company served its billionth burger McDonald\'s'
```

ç„¶åï¼Œä½¿ç”¨Cohere APIç”Ÿæˆå‘é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä¸­`cohere_key`æ˜¯APIå¯†é’¥ï¼ˆä¿æŒç§˜å¯†ï¼ï¼‰ï¼Œ`model`æ˜¯å‘é‡åŒ–å™¨ã€‚

```python
import cohere
co = cohere.Client(cohere_key)
co_resp = co.embed([str_in], model="multilingual-22-12")
```

ç„¶åæˆ‘ä»¬è¿è¡Œä¸€ä¸ªåŸºäº`nearVector`çš„æŸ¥è¯¢ï¼Œä»¥æ‰¾åˆ°ä¸è¯¥å‘é‡æœ€åŒ¹é…çš„å¯¹è±¡ï¼š

```python
client.query.get(
    "Question",
    ["question", "answer"]
).with_limit(2).with_near_vector(
    {'vector': co_resp.embeddings[0]}
).with_additional(['distance']).do()
```

æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªè·ç¦»ä¸º`0.0181`çš„ç»“æœï¼Œè™½ç„¶å¾ˆå°ï¼Œä½†ä¸ä¸ºé›¶ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬ä¸Weaviateåšäº†ä¸€äº›ä¸åŒçš„äº‹æƒ…ï¼

è®©æˆ‘ä»¬é€ä¸€è®¨è®ºè¿™äº›ä¸åŒä¹‹å¤„ï¼Œå¸Œæœ›èƒ½å¸®åŠ©æ‚¨äº†è§£Weaviateçš„é»˜è®¤è¡Œä¸ºã€‚

é¦–å…ˆï¼ŒWeaviateåœ¨æ‹¼æ¥ä¹‹å‰æŒ‰å­—æ¯é¡ºåºï¼ˆa-zï¼‰å¯¹å±æ€§è¿›è¡Œæ’åºã€‚æˆ‘ä»¬æœ€åˆçš„æ‹¼æ¥æ˜¯å°†`question`æ–‡æœ¬æ”¾åœ¨å‰é¢ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å°†å…¶åè½¬ä¸ºï¼š

```text
'McDonald\'s In 1963, live on "The Art Linkletter Show", this company served its billionth burger '
```

è¿™å°†è·ç¦»é™ä½åˆ°`0.0147`ã€‚

Weaviateå°†ç±»åæ·»åŠ åˆ°æ–‡æœ¬ä¸­ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†åœ¨å•è¯ä¹‹å‰æ·»åŠ `question`ï¼Œå¾—åˆ°ï¼š

```text
'question McDonald\'s In 1963, live on "The Art Linkletter Show", this company served its billionth burger'
```

è¿›ä¸€æ­¥é™ä½è·ç¦»è‡³ `0.0079`ã€‚

ç„¶åå¯ä»¥é€šè¿‡å°†æ–‡æœ¬è½¬æ¢ä¸ºå°å†™æ¥æ¶ˆé™¤å‰©ä½™çš„è·ç¦»ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```python
str_in = ''
for k in sorted(properties.keys()):
    v = properties[k]
    if type(v) == str:
        str_in += v + ' '
str_in = str_in.lower().strip()  # remove trailing whitespace
str_in = 'question ' + str_in
```

ç”Ÿæˆä¸­:

```text
'question mcdonald\'s in 1963, live on "the art linkletter show", this company served its billionth burger'
```

å†æ¬¡æ‰§è¡Œ`nearVector`æœç´¢æ—¶ï¼Œç»“æœä¸ºé›¶è·ç¦»ï¼ˆ`1.788e-07` - å®é™…ä¸Šæ˜¯é›¶ï¼‰ï¼

æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬æ‰‹åŠ¨å¤åˆ¶äº†Weaviateçš„é»˜è®¤å‘é‡åŒ–è¿‡ç¨‹ã€‚å®ƒå¹¶ä¸æ˜¯è¿‡äºå¤æ‚ï¼Œä½†äº†è§£å®ƒè‚¯å®šä¼šæœ‰æ‰€å¸®åŠ©ã€‚è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹Weaviateçš„ç¡®åˆ‡æ“ä½œã€‚

### Weaviateä¸­çš„æ–‡æœ¬å‘é‡åŒ–

import VectorizationBehavior from '/_includes/vectorization.behavior.mdx';

<VectorizationBehavior/>

æ—¢ç„¶æˆ‘ä»¬äº†è§£äº†è¿™ä¸€ç‚¹ï¼Œä½ å¯èƒ½ä¼šé—® - æ˜¯å¦å¯ä»¥è‡ªå®šä¹‰å‘é‡åŒ–è¿‡ç¨‹ï¼Ÿç­”æ¡ˆæ˜¯ï¼Œå½“ç„¶å¯ä»¥ã€‚

## åœ¨Weaviateä¸­è°ƒæ•´text2vecå‘é‡åŒ–

ä½ ä»¬ä¸­çš„ä¸€äº›äººå¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œåˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬è¿˜æ²¡æœ‰å¯¹æ¨¡å¼è¿›è¡Œä»»ä½•æ“ä½œã€‚è¿™æ„å‘³ç€ä½¿ç”¨çš„æ¨¡å¼æ˜¯ç”±è‡ªåŠ¨ç”Ÿæˆæ¨¡å¼åŠŸèƒ½ç”Ÿæˆçš„ï¼Œå› æ­¤å‘é‡åŒ–æ˜¯ä½¿ç”¨é»˜è®¤é€‰é¡¹è¿›è¡Œçš„ã€‚

æ¨¡å¼æ˜¯å®šä¹‰æ•°æ®ç±»å‹å’ŒçŸ¢é‡åŒ–å™¨ç­‰å†…å®¹çš„åœ°æ–¹ï¼Œä¹Ÿå¯ä»¥åœ¨ç±»ä¹‹é—´è®¾ç½®äº¤å‰å¼•ç”¨ã€‚ä½œä¸ºä¸€ä¸ªæ¨è®ºï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç›¸å…³çš„æ¨¡å¼é€‰é¡¹æ¥ä¿®æ”¹æ¯ä¸ªç±»çš„çŸ¢é‡åŒ–è¿‡ç¨‹ã€‚å®é™…ä¸Šï¼Œæ‚¨å¯ä»¥ä¸ºæ¯ä¸ªç±»å•ç‹¬[å®šä¹‰æ•°æ®æ¨¡å¼](/developers/weaviate/configuration/schema-configuration)ã€‚

è¿™æ„å‘³ç€æ‚¨å¯ä»¥ä½¿ç”¨æ¨¡å¼æ¥è°ƒæ•´Weaviateçš„å‘é‡åŒ–è¡Œä¸ºã€‚ä¸å‘é‡åŒ–ç›¸å…³çš„å˜é‡æ˜¯`dataType`ä»¥åŠåœ¨ç±»çº§åˆ«å’Œå±æ€§çº§åˆ«ä¸‹`moduleConfig`ä¸­åˆ—å‡ºçš„å˜é‡ã€‚

* åœ¨**ç±»**çº§åˆ«ä¸Šï¼Œ`vectorizeClassName`å°†ç¡®å®šæ˜¯å¦ä½¿ç”¨ç±»åè¿›è¡Œå‘é‡åŒ–ã€‚
* åœ¨**å±æ€§**çº§åˆ«ä¸Šï¼š
    * `skip`å°†ç¡®å®šå±æ€§æ˜¯å¦åº”åœ¨å‘é‡åŒ–ä¸­è¢«è·³è¿‡ï¼ˆå³è¢«å¿½ç•¥ï¼‰ï¼Œ
    * `vectorizePropertyName`å°†ç¡®å®šæ˜¯å¦ä½¿ç”¨å±æ€§åç§°ã€‚
* `dataType`å±æ€§ç¡®å®šWeaviateæ˜¯å¦å¿½ç•¥è¯¥å±æ€§ï¼Œå› ä¸ºå®ƒåªä¼šå¿½ç•¥é™¤`string`å’Œ`text`å€¼ä¹‹å¤–çš„æ‰€æœ‰å†…å®¹ã€‚

> æ‚¨å¯ä»¥åœ¨[æ¨¡å¼é…ç½®æ–‡æ¡£](/developers/weaviate/configuration/schema-configuration)ä¸­äº†è§£æœ‰å…³æ¯ä¸ªå˜é‡çš„æ›´å¤šä¿¡æ¯ã€‚
è®©æˆ‘ä»¬å°†æ­¤åº”ç”¨äºæˆ‘ä»¬çš„æ•°æ®ï¼Œä»¥è®¾ç½®Weaviateçš„å‘é‡åŒ–è¡Œä¸ºï¼Œç„¶åæˆ‘ä»¬å°†ä½¿ç”¨Cohere APIæ‰‹åŠ¨ç¡®è®¤ï¼Œå°±åƒæˆ‘ä»¬ä¹‹å‰æ‰€åšçš„é‚£æ ·ã€‚

æˆ‘ä»¬çš„æ–°æ¨¡å¼å¦‚ä¸‹æ‰€ç¤º - è¯·æ³¨æ„å·²æ³¨é‡Šçš„è¡Œï¼š

```python
question_class = {
    "class": "Question",
    "description": "Details of a Jeopardy! question",
    "moduleConfig": {
        "text2vec-cohere": {  # The vectorizer name - must match the vectorizer used
            "vectorizeClassName": False,  # Ignore class name
        },
    },
    "properties": [
        {
            "name": "answer",
            "description": "What the host prompts the contestants with.",
            "dataType": ["string"],
            "moduleConfig": {
                "text2vec-cohere": {
                    "skip": False,  # Do not skip class
                    "vectorizePropertyName": False  # Ignore property name
                }
            }
        },
        {
            "name": "question",
            "description": "What the contestant is to provide.",
            "dataType": ["string"],
            "moduleConfig": {
                "text2vec-cohere": {
                    "skip": False,  # Do not skip class
                    "vectorizePropertyName": True  # Do not ignore property name
                }
            }
        },
    ]
}
client.schema.create_class(question_class)
```

åœ¨æ¨¡å¼ä¸­å®šä¹‰äº†ä¸€äº›é€‰é¡¹ï¼Œä¾‹å¦‚`moduleConfig`/`text2vec-cohere`/`vectorizeClassName`å’Œ`properties`/`moduleConfig`/`text2vec-cohere`/`vectorizePropertyName`ï¼Œå®ƒä»¬ä¸å…¶é»˜è®¤å€¼ä¸åŒã€‚

ç»“æœæ˜¯ï¼Œä½¿ç”¨å…ˆå‰åŒ¹é…çš„Cohere APIå‘é‡è¿›è¡Œçš„`nearVector`æœç´¢ç°åœ¨ä¸è·ç¦»`0.00395`çš„å‘é‡åŒ¹é…ã€‚

ä¸ºäº†å°†å…¶é™è‡³é›¶ï¼Œæˆ‘ä»¬å¿…é¡»ä¿®æ”¹æ–‡æœ¬ç”Ÿæˆæµç¨‹ä»¥åŒ¹é…æ¨¡å¼ã€‚ä¸€æ—¦æˆ‘ä»¬å®Œæˆäº†è¿™ä¸ªï¼Œå®ƒçš„æ ·å­æ˜¯è¿™æ ·çš„ï¼š

```python
str_in = ''
for k in sorted(input_props.keys()):
    v = input_props[k]
    if type(v) == str:
        if k == 'question':
            str_in += k + ' '
        str_in += v + ' '
str_in = str_in.lower().strip()
```

ä½¿ç”¨ä»è¿™ä¸ªè¾“å…¥ç”Ÿæˆçš„å‘é‡è¿›è¡Œæœç´¢æ—¶ï¼Œä¸Weaviateä¸­æœ€æ¥è¿‘çš„åŒ¹é…å¯¹è±¡çš„è·ç¦»å†æ¬¡ä¸ºé›¶ã€‚æˆ‘ä»¬åˆå›åˆ°äº†åŸç‚¹ğŸ™‚ã€‚

## è®¨è®ºå’Œæ€»ç»“

æ‰€ä»¥ï¼Œå°±æ˜¯è¿™æ ·ã€‚åœ¨ä¸Šé¢çš„æ—…ç¨‹ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†Weaviateå¦‚ä½•ä»æ–‡æœ¬æ•°æ®å¯¹è±¡ä¸­åˆ›å»ºå‘é‡ï¼Œå…·ä½“åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š

- å¯¹ä½¿ç”¨`string`æˆ–`text`æ•°æ®ç±»å‹çš„å±æ€§è¿›è¡Œå‘é‡åŒ–
- åœ¨è¿æ¥å€¼ä¹‹å‰æŒ‰å­—æ¯é¡ºåºï¼ˆa-zï¼‰å¯¹å±æ€§è¿›è¡Œæ’åº
- åœ¨å±æ€§å€¼ä¹‹å‰æ·»åŠ ç±»å
- å¹¶å°†æ•´ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™
- æˆ‘ä»¬è¿˜çœ‹åˆ°äº†å¦‚ä½•é€šè¿‡æ¯ä¸ªç±»çš„æ¨¡å¼å®šä¹‰æ¥è°ƒæ•´æ­¤æ“ä½œã€‚

å…¶ä¸­ä¸€ä¸ªå½±å“æ˜¯ï¼Œå‘é‡åŒ–è¦æ±‚æ˜¯æ¨¡å¼å®šä¹‰ä¸­éå¸¸é‡è¦çš„è€ƒè™‘å› ç´ ã€‚å®ƒå¯èƒ½å†³å®šåœ¨å°†ç›¸å…³æ•°æ®å¯¹è±¡å¯¼å…¥Weaviateä¹‹å‰å¦‚ä½•æ‹†åˆ†å®ƒä»¬ï¼Œä»¥åŠé€‰æ‹©å¯¼å…¥å“ªäº›å­—æ®µã€‚

è®©æˆ‘ä»¬å†æ¬¡è€ƒè™‘æˆ‘ä»¬çš„é—®ç­”é¢˜è¯­æ–™åº“ä½œä¸ºä¸€ä¸ªå…·ä½“çš„ä¾‹å­ã€‚å‡è®¾æˆ‘ä»¬æ­£åœ¨æ„å»ºä¸€ä¸ªé—®ç­”åº”ç”¨ç¨‹åºï¼Œå…è®¸ç”¨æˆ·æœç´¢é—®é¢˜ã€‚é‚£ä¹ˆï¼Œæœ€å¥½å°†æ¯ä¸ªé—®ç­”é¡¹å¯¼å…¥ä¸¤ä¸ªç±»ï¼Œä¸€ä¸ªç”¨äºé—®é¢˜ï¼Œä¸€ä¸ªç”¨äºç­”æ¡ˆï¼Œä»¥é¿å…æ ¹æ®ç”¨æˆ·çš„æŸ¥è¯¢é€éœ²ç­”æ¡ˆã€‚ä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨ç­”æ¡ˆä¸ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œæ¯”è¾ƒã€‚

å¦ä¸€æ–¹é¢ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå°†å¤šä¸ªå­—æ®µçš„æ–‡æœ¬æ•°æ®å¯¼å…¥ä¸ºä¸€ä¸ªå¯¹è±¡å¯èƒ½æ›´å¯å–ã€‚è¿™æ ·ï¼Œç”¨æˆ·å¯ä»¥è¿›è¡ŒåŒ¹é…æ„ä¹‰çš„æœç´¢ï¼Œè€Œæ— éœ€è¿‡å¤šè€ƒè™‘ä¿¡æ¯æ‰€åœ¨çš„ç¡®åˆ‡å­—æ®µã€‚æˆ‘ä»¬ä¸åº”å¿½è§†å…¶ä»–æœç´¢æ–¹æ³•ï¼Œå¦‚BM25Fæˆ–æ··åˆæœç´¢ï¼Œè¿™äº›å†³ç­–éƒ½ä¼šå¯¹å…¶äº§ç”Ÿå½±å“ã€‚

æ—¢ç„¶ä½ å·²ç»çœ‹åˆ°äº†å¹•åå‘ç”Ÿçš„äº‹æƒ…ï¼Œæˆ‘ä»¬é¼“åŠ±ä½ åœ¨ä¸‹æ¬¡ä½¿ç”¨Weaviateæ„å»ºé¡¹ç›®æ—¶å°è¯•åº”ç”¨è¿™äº›æ¦‚å¿µã€‚è™½ç„¶åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ç›¸ä¼¼æ€§çš„å˜åŒ–å¯èƒ½è¾ƒå°ï¼Œä½†åœ¨æŸäº›é¢†åŸŸå’Œè¯­æ–™åº“ä¸­ï¼Œå®ƒä»¬çš„å½±å“å¯èƒ½ä¼šæ›´å¤§ã€‚è°ƒæ•´å‡†ç¡®çš„å‘é‡åŒ–æ–¹æ¡ˆå¯èƒ½ä¼šä¸ºä½ çš„Weaviateå®ä¾‹æä¾›é¢å¤–çš„æå‡ã€‚

import StayConnected from '/_includes/stay-connected.mdx'

<StayConnected />